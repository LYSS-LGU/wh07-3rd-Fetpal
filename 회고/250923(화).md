# ğŸ“… 2025-09-23 ê°œë°œ ì¼ì§€

> **ì˜¤ëŠ˜ì˜ í•µì‹¬**: ë§ˆì´í˜ì´ì§€ ë°±ì‹ -í”Œë˜ë„ˆ ì™„ì „ ì—°ë™ ì‹œìŠ¤í…œ êµ¬í˜„ ì™„ë£Œ! ğŸ‰

## ğŸ¯ ì˜¤ëŠ˜ì˜ ì£¼ìš” ì„±ê³¼

### âœ… **ë§ˆì´í˜ì´ì§€ ì˜ˆë°©ì ‘ì¢… ì¹´ë“œ userId ì „íŒŒì²´ì¸ ì™„ì„±**

- **ë¬¸ì œ**: ë§ˆì´í˜ì´ì§€ ë°±ì‹  ì¹´ë“œì—ì„œ í”Œë˜ë„ˆ ì´ë²¤íŠ¸ ë°ì´í„° ëª» ê°€ì ¸ì˜¤ëŠ” í˜„ìƒ
- **í•´ê²°**: userId propì„ page.tsx â†’ ProfileUnifiedTab â†’ PalProfileList â†’ VaccinationCard â†’ VaccinationSection â†’ VaccinationSlider â†’ VaccineCompactCard ê¹Œì§€ ì™„ì „ ì „íŒŒ
- **ê²°ê³¼**: `usePlanner(userId)` ì •ìƒ ì‘ë™ìœ¼ë¡œ ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™” ì„±ê³µ

### âœ… **í”Œë˜ë„ˆ ëª¨ë‹¬ì—ì„œ ì‹¤ì‹œê°„ ë‚ ì§œ ì—°ë™ êµ¬í˜„**

- **ë¬¸ì œ**: ë§ˆì´í˜ì´ì§€ "ì¼ì •ê´€ë¦¬" ë²„íŠ¼ í´ë¦­ì‹œ ì—¬ì „íˆ 14ì¼ë¡œ í‘œì‹œ
- **í•´ê²°**: `createVaccinationEvent()`ì™€ `handleScheduleManagement()` í•¨ìˆ˜ì—ì„œ `realScheduledDate` ìš°ì„  ì‚¬ìš©
- **ê²°ê³¼**: í”Œë˜ë„ˆì—ì„œ ìˆ˜ì •í•œ ë‚ ì§œê°€ ë§ˆì´í˜ì´ì§€ ëª¨ë‹¬ì—ë„ ì‹¤ì‹œê°„ ë°˜ì˜

### âœ… **ë§ˆì´í˜ì´ì§€ ë°±ì‹  ì¹´ë“œì— D-nn í‘œì‹œ ì¶”ê°€**

- **ëª©ì **: í”Œë˜ë„ˆ í˜ì´ì§€ì™€ ë§ˆì´í˜ì´ì§€ UI í†µì¼
- **êµ¬í˜„**: í”Œë˜ë„ˆì˜ D-day í‘œì‹œ ë¡œì§ ê·¸ëŒ€ë¡œ ì ìš© (`D-${realDaysUntil}` ë“±)
- **ìŠ¤íƒ€ì¼**: ê¸´ê¸‰ë„ë³„ ìƒ‰ìƒ êµ¬ë¶„ (ì§€ì—°/ê¸´ê¸‰/ê³§ì˜ˆì •/ì¼ë°˜)
- **ê²°ê³¼**: ë§ˆì´í˜ì´ì§€ë„ í”Œë˜ë„ˆì™€ ë™ì¼í•œ ì§ê´€ì  UI ì™„ì„±

### âœ… **ë°±ì‹  ì¼ì • - í”Œë˜ë„ˆ ì—°ë™ ë¬¸ì œ ì™„ì „ í•´ê²°**

- **ë¬¸ì œ**: ê¸°ì¡´ ë°±ì‹  ì´ë²¤íŠ¸ ìˆ˜ì • ëŒ€ì‹  ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ê³„ì† ë“±ë¡
- **ì›ì¸**: `event.type === 'vaccination'`ìœ¼ë¡œ ê²€ìƒ‰í–ˆì§€ë§Œ ì‹¤ì œë¡œëŠ” `eventType: "general"`
- **í•´ê²°**: í”Œë˜ë„ˆ ë°©ì‹ ê·¸ëŒ€ë¡œ ì œëª© ê¸°ë°˜ ë§¤ì¹­ (`ğŸ’‰`, `ğŸ©¹` ì´ëª¨ì§€ + ë°±ì‹ ëª… + ì°¨ìˆ˜)
- **ê²°ê³¼**: ì¤‘ë³µ ë“±ë¡ ë°©ì§€í•˜ê³  ê¸°ì¡´ ì´ë²¤íŠ¸ ì •í™•íˆ ìˆ˜ì •

## ğŸ”§ ê¸°ìˆ ì  ê°œì„ ì‚¬í•­

### **Hook Composition íŒ¨í„´ í™œìš©**

```javascript
// VaccineCompactCard.jsx
const plannerHookWithUserId = usePlanner(userId); // âœ… userId í¬í•¨
const eventModal = useEventModal(plannerHookWithUserId); // âœ… ì œëŒ€ë¡œ ì—°ë™
```

### **ì‹¤ì‹œê°„ ë‚ ì§œ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ**

```javascript
// 3ë‹¨ê³„ ìš°ì„ ìˆœìœ„: í”Œë˜ë„ˆ ì´ë²¤íŠ¸ > ë°±ì‹  DB > ìë™ ê³„ì‚°
const { realScheduledDate, realDaysUntil } = useRealTimeDateList(
  cardData,
  vaccinations,
  eventModal.events, // â† í”Œë˜ë„ˆ ì´ë²¤íŠ¸ ë°ì´í„°
  Date.now()
);
```

### **ì •êµí•œ ì´ë²¤íŠ¸ ë§¤ì¹­ ë¡œì§**

```javascript
// í”Œë˜ë„ˆì™€ ë™ì¼í•œ ë°±ì‹  ì´ë²¤íŠ¸ ê²€ìƒ‰
const existingEvent = eventModal.events.find((event) => {
  const eventTitle = event.title?.toLowerCase() || "";
  const isVaccinationEvent =
    eventTitle.includes("ğŸ’‰") || eventTitle.includes("ğŸ©¹");
  const vaccineNameMatch = cleanEventTitle.includes(cleanVaccineName);
  const shotNumberMatch =
    nextVaccine.shotNumber &&
    eventTitle.includes(`${nextVaccine.shotNumber}ì°¨`);
  return isVaccinationEvent && (exactTitleMatch || partialMatch);
});
```

## ğŸ“± ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### **ë§ˆì´í˜ì´ì§€ â†” í”Œë˜ë„ˆ ì™„ì „ ë™ê¸°í™”**

- âœ… í”Œë˜ë„ˆì—ì„œ ë‚ ì§œ ìˆ˜ì • â†’ ë§ˆì´í˜ì´ì§€ ì‹¤ì‹œê°„ ë°˜ì˜
- âœ… ë§ˆì´í˜ì´ì§€ "ì¼ì •ê´€ë¦¬" â†’ ê¸°ì¡´ ì´ë²¤íŠ¸ ìˆ˜ì • ëª¨ë“œ
- âœ… D-day í‘œì‹œë¡œ ì§ê´€ì  ê¸´ê¸‰ë„ í™•ì¸
- âœ… ì¤‘ë³µ ì´ë²¤íŠ¸ ìƒì„± ë°©ì§€

### **Co-location CSS ëª¨ë“ˆ í™œìš©**

```css
/* vaccinecompactcard.module.css */
.dDayBadge {
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.dDayBadge.overdue {
  background: var(--color-red-100);
}
.dDayBadge.urgent {
  background: var(--color-orange-100);
}
.dDayBadge.soon {
  background: var(--color-yellow-100);
}
.dDayBadge.normal {
  background: var(--color-green-100);
}
```

## ğŸš€ Git ì»¤ë°‹ ì™„ë£Œ

**ì»¤ë°‹**: `feat: ë§ˆì´í˜ì´ì§€ ë°±ì‹ -í”Œë˜ë„ˆ ì™„ì „ ì—°ë™ ì‹œìŠ¤í…œ êµ¬í˜„`

- 51ê°œ íŒŒì¼ ë³€ê²½
- Hook Composition + Co-location íŒ¨í„´ìœ¼ë¡œ ê¹”ë”í•œ êµ¬ì¡°í™”
- ì‹¤ì‹œê°„ ë™ê¸°í™” ì‹œìŠ¤í…œ ì™„ì„±

## ğŸ“ ì˜¤ëŠ˜ì˜ í•™ìŠµ í¬ì¸íŠ¸

### **Hook Compositionì˜ ìœ„ë ¥**

- **ë¬¸ì œ í•´ê²° ì†ë„**: userId ì „íŒŒì²´ì¸ì„ ë‹¨ê³„ë³„ë¡œ ì²´ê³„ì  êµ¬í˜„
- **ë””ë²„ê¹… íš¨ìœ¨ì„±**: ê° ì»´í¬ë„ŒíŠ¸ë³„ ë…ë¦½ì  ë¬¸ì œ í•´ê²° ê°€ëŠ¥
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ì‹œì—ë„ ê¸°ì¡´ êµ¬ì¡° ìœ ì§€

### **í”Œë˜ë„ˆ ë¡œì§ ì¬í™œìš©**

- **DRY ì›ì¹™**: ì´ë¯¸ ê²€ì¦ëœ í”Œë˜ë„ˆì˜ ë°±ì‹  ë§¤ì¹­ ë¡œì§ ê·¸ëŒ€ë¡œ ì ìš©
- **ì¼ê´€ì„± í™•ë³´**: ë‘ í˜ì´ì§€ ê°„ ë™ì¼í•œ ë™ì‘ ë³´ì¥
- **ìœ ì§€ë³´ìˆ˜ì„±**: í•œ ê³³ì—ì„œ ë¡œì§ ìˆ˜ì •ì‹œ ì–‘ìª½ ëª¨ë‘ ê°œì„ 

## ğŸ¯ ë‚´ì¼ ê³„íš

### â­ **"ì ‘ì¢…ì™„ë£Œ" ìë™ ìŠ¤ì¼€ì¤„ë§ ë§ˆë¬´ë¦¬**

- [ ] ì ‘ì¢…ì™„ë£Œ ë²„íŠ¼ í´ë¦­ì‹œ í”Œë˜ë„ˆ ì´ë²¤íŠ¸ ì™„ë£Œ ì²˜ë¦¬
- [ ] ë‹¤ìŒ ì°¨ìˆ˜ ìë™ ìƒì„± ë° ìŠ¤ì¼€ì¤„ë§
- [ ] ì„±ê²¬ ì •ê¸° ì ‘ì¢… ìë™ ìŠ¤ì¼€ì¤„ë§ ì‹œìŠ¤í…œ

### â­ **ì•Œë¦¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë„ì…**

- [ ] Toast ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬í˜„ (react-toastify?)
- [ ] ë°±ì‹  ì¼ì • ì•Œë¦¼ ê¸°ëŠ¥
- [ ] ì„±ê³µ/ì‹¤íŒ¨/ê²½ê³  ì•Œë¦¼ UI í†µì¼

### â­ **ì»¤ë®¤ë‹ˆí‹° í˜ì´ì§€ ëŒ“ê¸€ ì‹œìŠ¤í…œ**

- [ ] ëŒ“ê¸€ CRUD ê¸°ëŠ¥ êµ¬í˜„
- [ ] ëŒ€ëŒ“ê¸€ (nested comments) ì‹œìŠ¤í…œ
- [ ] ì‹¤ì‹œê°„ ëŒ“ê¸€ ì—…ë°ì´íŠ¸

### â­ **ì‹¤ì‹œê°„ ì±„íŒ… ì‹œìŠ¤í…œ ì¡°ì‚¬**

- [ ] Supabase Realtime ê¸°ëŠ¥ í™œìš©
- [ ] ì±„íŒ…ë°© ìƒì„±/ì°¸ì—¬ ì‹œìŠ¤í…œ
- [ ] ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹  ì‹¤ì‹œê°„ ì²˜ë¦¬

## ğŸ“š ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ (ì‹¤ì‹œê°„ ì±„íŒ… ê´€ë ¨)

### **Supabase Realtime ì±„íŒ… êµ¬í˜„ ì°¸ê³ ìë£Œ**

1. **ê³µì‹ Supabase ì±„íŒ… íŠœí† ë¦¬ì–¼**

   - URL: https://supabase.com/docs/guides/realtime/quickstart
   - í•µì‹¬: Realtime subscriptions, Row Level Security

2. **Next.js + Supabase ì±„íŒ… ì˜ˆì œ**

   - GitHub: https://github.com/supabase/supabase/tree/master/examples/realtime/nextjs-chat
   - íŠ¹ì§•: TypeScript, App Router, ì‹¤ì‹œê°„ ë©”ì‹œì§€

3. **ì»¤ë®¤ë‹ˆí‹° ì±„íŒ… ì‹œìŠ¤í…œ ë ˆí¼ëŸ°ìŠ¤**

   - GitHub: https://github.com/webdevcody/supabase-realtime-chat
   - í¬í•¨: ì±„íŒ…ë°©, ì˜¨ë¼ì¸ ìƒíƒœ, ë©”ì‹œì§€ ì•Œë¦¼

4. **React + Supabase ì‹¤ì‹œê°„ ê¸°ëŠ¥**
   - ë¬¸ì„œ: https://supabase.com/docs/reference/javascript/subscribe
   - í•µì‹¬: `supabase.channel().on()` íŒ¨í„´

### **ì±„íŒ… ì‹œìŠ¤í…œ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸**

```javascript
// ê¸°ë³¸ í…Œì´ë¸” êµ¬ì¡° ì˜ˆì‹œ
-messages(id, user_id, room_id, content, created_at) -
  chat_rooms(id, name, created_by, created_at) -
  room_participants(room_id, user_id, joined_at);

// ì‹¤ì‹œê°„ êµ¬ë… íŒ¨í„´
const channel = supabase
  .channel("chat-room-1")
  .on(
    "postgres_changes",
    { event: "INSERT", schema: "public", table: "messages" },
    handleNewMessage
  )
  .subscribe();
```

## ğŸ’­ ê°œë°œ íšŒê³ 

### **ì˜í–ˆë˜ ì **

- ğŸ¯ **ì²´ê³„ì  ì ‘ê·¼**: userId ì „íŒŒì²´ì¸ì„ ë‹¨ê³„ë³„ë¡œ ì°¨ê·¼ì°¨ê·¼ êµ¬í˜„
- ğŸ” **ì •í™•í•œ ë¬¸ì œ ì§„ë‹¨**: ì œëª© ë§¤ì¹­ ì´ìŠˆë¥¼ í”Œë˜ë„ˆ ë¡œì§ ë¶„ì„ìœ¼ë¡œ í•´ê²°
- ğŸ¨ **UI í†µì¼ì„±**: í”Œë˜ë„ˆì™€ ë§ˆì´í˜ì´ì§€ D-day í‘œì‹œ ì™„ì „ í†µí•©
- ğŸš€ **Hook Composition**: ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬

### **ë‚´ì¼ ê°œì„ í•  ì **

- âš¡ **ì„±ëŠ¥ ìµœì í™”**: ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‹œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ì¤„ì´ê¸°
- ğŸ¯ **ì ‘ì¢…ì™„ë£Œ UX**: ë” ì§ê´€ì ì¸ ì™„ë£Œ í”Œë¡œìš° ì„¤ê³„
- ğŸ“± **ëª¨ë°”ì¼ ëŒ€ì‘**: ì‘ì€ í™”ë©´ì—ì„œ D-day ë°°ì§€ ê°€ë…ì„± ê°œì„ 

**ì˜¤ëŠ˜ë„ Hook Composition + Co-location íŒ¨í„´ì˜ ìœ„ë ¥ì„ ë‹¤ì‹œ í•œë²ˆ ëŠê¼ˆìŠµë‹ˆë‹¤!** ğŸ‰
ë³µì¡í•œ ë°ì´í„° íë¦„ë„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì–´ì„œ ì •ë§ íš¨ìœ¨ì ì¸ ê°œë°œì´ ê°€ëŠ¥í–ˆë„¤ìš”.

---
