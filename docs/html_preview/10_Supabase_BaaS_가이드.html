<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Supabase BaaS ê°€ì´ë“œ</title>

    <!-- Mermaid.js CDN -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35,
                mirrorActors: true,
                useMaxWidth: true
            }
        });
    </script>

    <style>
        @media print {
            @page {
                size: A4 portrait;
                margin: 2cm;
            }

            /* ë¸Œë¼ìš°ì € ê¸°ë³¸ í—¤ë”/í‘¸í„° ìˆ¨ê¸°ê¸° */
            @page {
                margin-top: 2cm;
                margin-bottom: 2cm;
            }

            body {
                margin: 0;
                padding: 0;
            }

            .print-button {
                display: none !important;
            }

            /* Mermaid ë‹¤ì´ì–´ê·¸ë¨ í˜ì´ì§€ ë¸Œë ˆì´í¬ ë°©ì§€ */
            .mermaid {
                page-break-inside: avoid;
                break-inside: avoid;
            }

            pre {
                page-break-inside: avoid;
            }
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Malgun Gothic", "ë§‘ì€ ê³ ë”•",
                         "Segoe UI", "Noto Sans KR", Arial, sans-serif;
            line-height: 1.7;
            color: #24292e;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #ffffff;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        h1 {
            color: #1a1a1a;
            border-bottom: 4px solid #0366d6;
            padding-bottom: 12px;
            margin-top: 32px;
            margin-bottom: 24px;
            font-size: 2.2em;
            font-weight: 700;
            page-break-after: avoid;
        }

        h2 {
            color: #24292e;
            border-bottom: 2px solid #e1e4e8;
            padding-bottom: 10px;
            margin-top: 28px;
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 600;
            page-break-after: avoid;
        }

        h3 {
            color: #24292e;
            margin-top: 24px;
            margin-bottom: 16px;
            font-size: 1.4em;
            font-weight: 600;
        }

        h4 {
            color: #24292e;
            margin-top: 20px;
            margin-bottom: 12px;
            font-size: 1.2em;
            font-weight: 600;
        }

        /* ë‹¨ë½ ë° í…ìŠ¤íŠ¸ */
        p {
            margin: 16px 0;
        }

        /* ë¦¬ìŠ¤íŠ¸ */
        ul, ol {
            margin: 16px 0;
            padding-left: 32px;
        }

        li {
            margin: 8px 0;
        }

        /* í…Œì´ë¸” */
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 24px 0;
            font-size: 0.95em;
        }

        th, td {
            border: 1px solid #d0d7de;
            padding: 12px 16px;
            text-align: left;
        }

        th {
            background-color: #0366d6;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: #f6f8fa;
        }

        tr:hover {
            background-color: #f0f3f5;
        }

        /* ì½”ë“œ ë¸”ë¡ */
        code {
            background-color: #f6f8fa;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: "Consolas", "Monaco", "Courier New", monospace;
            font-size: 0.9em;
            color: #24292e;
        }

        pre {
            background-color: #f6f8fa;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
            border-left: 4px solid #0366d6;
            margin: 16px 0;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        /* Blockquote */
        blockquote {
            border-left: 4px solid #0366d6;
            padding-left: 20px;
            margin: 20px 0;
            color: #57606a;
            background-color: #f6f8fa;
            padding: 15px 20px;
            border-radius: 4px;
        }

        /* ìˆ˜í‰ì„  */
        hr {
            border: none;
            border-top: 2px solid #e1e4e8;
            margin: 32px 0;
        }

        /* Mermaid ë‹¤ì´ì–´ê·¸ë¨ */
        .mermaid {
            margin: 24px 0;
            text-align: center;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
        }

        .mermaid svg {
            max-width: 100%;
            height: auto;
        }

        /* ì´ë¯¸ì§€ */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }

        /* ì¸ì‡„ ë²„íŠ¼ */
        .print-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            background-color: #0366d6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: background-color 0.2s;
            z-index: 1000;
        }

        .print-button:hover {
            background-color: #0256c7;
        }

        /* ê°•ì¡° */
        strong {
            color: #24292e;
            font-weight: 600;
        }

        em {
            color: #57606a;
            font-style: italic;
        }

        /* ë§í¬ */
        a {
            color: #0366d6;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <button class="print-button" onclick="window.print()">
        <span>ğŸ–¨ï¸</span> PDFë¡œ ì €ì¥
    </button>

<h1>Supabase BaaS ì•„í‚¤í…ì²˜ ê°€ì´ë“œ</h1>
<blockquote>
<p><strong>ì´ˆë³´ ê°œë°œìë¥¼ ìœ„í•œ Supabase BaaS ì´í•´í•˜ê¸°</strong><br />
<strong>ì‘ì„±ì¼</strong>: 2025-10-06 (ìµœì‹ í™”: 2025-11-14)</p>
</blockquote>
<hr />
<h2>ğŸ“‹ ë¬¸ì„œ ê°œìš”</h2>
<p>ì´ ë¬¸ì„œëŠ” Fetpal í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•œ <strong>Supabase BaaS (Backend as a Service)</strong>ì™€ <strong>MCP (Model Context Protocol)</strong>ë¥¼ ì´ˆë³´ ê°œë°œìë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<p><strong>ì£¼ìš” ë‚´ìš©</strong>:</p>
<ul>
<li>Supabase BaaSê°€ ë¬´ì—‡ì¸ì§€</li>
<li>ì™œ Firebaseë‚˜ AWS ëŒ€ì‹  Supabaseë¥¼ ì„ íƒí–ˆëŠ”ì§€</li>
<li>ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€</li>
<li>ê°œë°œ ì‹œê°„ê³¼ ì½”ë“œë¥¼ ì–¼ë§ˆë‚˜ ì¤„ì˜€ëŠ”ì§€</li>
</ul>
<hr />
<h2>ğŸ¤” 1. Supabase BaaSë€? (5ë¶„ë§Œì— ì´í•´í•˜ê¸°)</h2>
<h3>1.1. BaaS (Backend as a Service)ì˜ ê°œë…</h3>
<div class="mermaid">
graph LR
    A[ì „í†µì ì¸ ê°œë°œ] -->|2-3ì£¼| B[ì„œë²„ ì½”ë“œ 2000ì¤„]
    C[Supabase BaaS] -->|3-5ì¼| D[í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ 200ì¤„]

    style A fill:#FFB74D
    style B fill:#FFB74D
    style C fill:#66BB6A
    style D fill:#66BB6A
</div>

<p><strong>í•œ ì¤„ ìš”ì•½</strong>: "ë°±ì—”ë“œ ì„œë²„ë¥¼ ì§ì ‘ ë§Œë“¤ì§€ ì•Šê³ , ì´ë¯¸ ë§Œë“¤ì–´ì§„ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ"</p>
<hr />
<h3>1.2. ì „í†µì ì¸ ë°©ì‹ vs Supabase ë°©ì‹ ë¹„êµ</h3>
<h4>âŒ ì „í†µì ì¸ ë°±ì—”ë“œ ê°œë°œ (Node.js + Express + PostgreSQL)</h4>
<pre><code>ê°œë°œìê°€ ì§ì ‘ í•´ì•¼ í•  ì¼ (2-3ì£¼ ì†Œìš”):

1ï¸âƒ£ ì„œë²„ ì„¤ì • (500ì¤„)
   â”œâ”€ Express ì„œë²„ êµ¬ì¶•
   â”œâ”€ ë¼ìš°í„° ì„¤ì •
   â”œâ”€ ë¯¸ë“¤ì›¨ì–´ êµ¬ì„±
   â””â”€ ì—ëŸ¬ í•¸ë“¤ë§

2ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ (300ì¤„)
   â”œâ”€ PostgreSQL ì„¤ì¹˜ ë° ì„¤ì •
   â”œâ”€ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜ë™ ê´€ë¦¬
   â”œâ”€ ì—°ê²° í’€ ê´€ë¦¬
   â””â”€ ë°±ì—… ì‹œìŠ¤í…œ êµ¬ì¶•

3ï¸âƒ£ ì¸ì¦ ì‹œìŠ¤í…œ (400ì¤„)
   â”œâ”€ JWT í† í° ìƒì„±/ê²€ì¦
   â”œâ”€ ì„¸ì…˜ ê´€ë¦¬
   â”œâ”€ ì†Œì…œ ë¡œê·¸ì¸ (Google, Kakao)
   â””â”€ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”

4ï¸âƒ£ ì‹¤ì‹œê°„ í†µì‹  (300ì¤„)
   â”œâ”€ WebSocket ì„œë²„ êµ¬ì¶•
   â”œâ”€ Socket.io ì„¤ì •
   â”œâ”€ ì±„ë„ ê´€ë¦¬
   â””â”€ ì˜¨ë¼ì¸ ìƒíƒœ ì¶”ì 

5ï¸âƒ£ íŒŒì¼ ìŠ¤í† ë¦¬ì§€ (200ì¤„)
   â”œâ”€ AWS S3 ì—°ë™
   â”œâ”€ ì´ë¯¸ì§€ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
   â”œâ”€ ê¶Œí•œ ê´€ë¦¬
   â””â”€ CDN ì„¤ì •

6ï¸âƒ£ ë³´ì•ˆ ì„¤ì • (300ì¤„)
   â”œâ”€ CORS ì •ì±…
   â”œâ”€ Rate Limiting
   â”œâ”€ SQL Injection ë°©ì–´
   â””â”€ XSS ë°©ì–´

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì´ ê°œë°œ ì‹œê°„: 2-3ì£¼
ì´ ì½”ë“œëŸ‰: 2,000ì¤„+
ìœ ì§€ë³´ìˆ˜: ì§€ì†ì ìœ¼ë¡œ í•„ìš”
</code></pre>
<h4>âœ… Supabase BaaS (3-5ì¼)</h4>
<pre><code>Supabaseê°€ ìë™ìœ¼ë¡œ ì œê³µ (3-5ì¼):

âœ¨ 1ï¸âƒ£ ì„œë²„ ì½”ë“œ 0ì¤„!
   â””â”€ REST API ìë™ ìƒì„±

âœ¨ 2ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ (ìë™ ê´€ë¦¬)
   â”œâ”€ PostgreSQL ìë™ ì„¤ì¹˜
   â”œâ”€ ë§ˆì´ê·¸ë ˆì´ì…˜ GUI ì œê³µ
   â”œâ”€ ì—°ê²° í’€ ìë™ ê´€ë¦¬
   â””â”€ ìë™ ë°±ì—… (7ì¼ ë³´ê´€)

âœ¨ 3ï¸âƒ£ ì¸ì¦ ì‹œìŠ¤í…œ (ìë™)
   â”œâ”€ JWT í† í° ìë™ ì²˜ë¦¬
   â”œâ”€ ì„¸ì…˜ ìë™ ê´€ë¦¬
   â”œâ”€ ì†Œì…œ ë¡œê·¸ì¸ (ì„¤ì •ë§Œ í•˜ë©´ ë¨)
   â””â”€ ë¹„ë°€ë²ˆí˜¸ ìë™ ì•”í˜¸í™”

âœ¨ 4ï¸âƒ£ ì‹¤ì‹œê°„ í†µì‹  (WebSocket ë‚´ì¥)
   â”œâ”€ Realtime ì±„ë„ ìë™
   â”œâ”€ ì½”ë“œ 3ì¤„ë¡œ ì‹¤ì‹œê°„ êµ¬ë…
   â”œâ”€ ì±„ë„ ê´€ë¦¬ ìë™
   â””â”€ Presence ìë™ ì¶”ì 

âœ¨ 5ï¸âƒ£ íŒŒì¼ ìŠ¤í† ë¦¬ì§€ (ë‚´ì¥)
   â”œâ”€ Storage Bucket ì œê³µ
   â”œâ”€ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ API
   â”œâ”€ RLSë¡œ ê¶Œí•œ ìë™ ê´€ë¦¬
   â””â”€ CDN ìë™ ì ìš©

âœ¨ 6ï¸âƒ£ ë³´ì•ˆ (ìë™ ì ìš©)
   â”œâ”€ CORS ìë™ ì„¤ì •
   â”œâ”€ Rate Limiting ê¸°ë³¸ ì œê³µ
   â”œâ”€ SQL Injection ìë™ ë°©ì–´
   â””â”€ RLS (Row Level Security)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì‹¤ì œ ê°œë°œ ì‹œê°„: 3-5ì¼
ì‹¤ì œ ì½”ë“œëŸ‰: 200ì¤„ ì´í•˜
ìœ ì§€ë³´ìˆ˜: Supabaseê°€ ìë™ ê´€ë¦¬
</code></pre>
<hr />
<h3>1.3. ê²°ê³¼ ë¹„êµ (ìˆ«ìë¡œ ì¦ëª…!)</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">í•­ëª©</th>
<th style="text-align: center;">ì „í†µì ì¸ ë°±ì—”ë“œ</th>
<th style="text-align: center;">Supabase BaaS</th>
<th style="text-align: center;">ê°œì„ ìœ¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>ê°œë°œ ì‹œê°„</strong></td>
<td style="text-align: center;">2-3ì£¼</td>
<td style="text-align: center;">3-5ì¼</td>
<td style="text-align: center;"><strong>80% ë‹¨ì¶•</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì½”ë“œëŸ‰</strong></td>
<td style="text-align: center;">2,000ì¤„+</td>
<td style="text-align: center;">200ì¤„</td>
<td style="text-align: center;"><strong>90% ê°ì†Œ</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì„œë²„ ê´€ë¦¬</strong></td>
<td style="text-align: center;">ì§ì ‘ ê´€ë¦¬ í•„ìš”</td>
<td style="text-align: center;">ìë™ ê´€ë¦¬</td>
<td style="text-align: center;"><strong>100% ìë™í™”</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ë³´ì•ˆ ì„¤ì •</strong></td>
<td style="text-align: center;">ìˆ˜ë™ ì„¤ì •</td>
<td style="text-align: center;">ìë™ ì ìš©</td>
<td style="text-align: center;"><strong>100% ìë™í™”</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ìŠ¤ì¼€ì¼ë§</strong></td>
<td style="text-align: center;">ìˆ˜ë™ ì„¤ì •</td>
<td style="text-align: center;">ìë™ ìŠ¤ì¼€ì¼ë§</td>
<td style="text-align: center;"><strong>100% ìë™í™”</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ë¹„ìš©</strong></td>
<td style="text-align: center;">ì„œë²„ ë¹„ìš© ($50/ì›”~)</td>
<td style="text-align: center;">ë¬´ë£Œ í‹°ì–´</td>
<td style="text-align: center;"><strong>ë¬´ë£Œ!</strong> âœ…</td>
</tr>
</tbody>
</table>
<hr />
<h2>ğŸš€ 2. ì‹¤ì œ ì½”ë“œ ë¹„êµ (ê²Œì‹œê¸€ ì‘ì„± ì˜ˆì‹œ)</h2>
<h3>2.1. ì‹œë‚˜ë¦¬ì˜¤: ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ì‘ì„±</h3>
<p><strong>ê¸°ëŠ¥</strong>:</p>
<ul>
<li>ì‚¬ìš©ìê°€ ê²Œì‹œê¸€ ì‘ì„±</li>
<li>ì´ë¯¸ì§€ ì—…ë¡œë“œ</li>
<li>ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ í‘œì‹œ</li>
</ul>
<hr />
<h3>2.2. ì „í†µì ì¸ ë°©ì‹ (500ì¤„)</h3>
<pre><code class="language-typescript">// âŒ ì „í†µì ì¸ ë°©ì‹: ì„œë²„ ì½”ë“œ í•„ìš” (500ì¤„+)

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 1. Express ì„œë²„ ì„¤ì • (50ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const express = require(&quot;express&quot;);
const app = express();
const jwt = require(&quot;jsonwebtoken&quot;);
const bcrypt = require(&quot;bcrypt&quot;);
const { Pool } = require(&quot;pg&quot;);
const multer = require(&quot;multer&quot;);
const AWS = require(&quot;aws-sdk&quot;);

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 2. DB ì—°ê²° ì„¤ì • (30ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const pool = new Pool({
  user: &quot;postgres&quot;,
  host: &quot;localhost&quot;,
  database: &quot;fetpal&quot;,
  password: &quot;password&quot;,
  port: 5432,
});

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 3. JWT ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ (50ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const authenticateToken = (req, res, next) =&gt; {
  const authHeader = req.headers[&quot;authorization&quot;];
  const token = authHeader &amp;&amp; authHeader.split(&quot; &quot;)[1];

  if (!token) return res.sendStatus(401);

  jwt.verify(token, process.env.JWT_SECRET, (err, user) =&gt; {
    if (err) return res.sendStatus(403);
    req.user = user;
    next();
  });
};

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 4. AWS S3 ì„¤ì • (50ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const s3 = new AWS.S3({
  accessKeyId: process.env.AWS_ACCESS_KEY,
  secretAccessKey: process.env.AWS_SECRET_KEY,
});

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 5. ê²Œì‹œê¸€ ì‘ì„± ì—”ë“œí¬ì¸íŠ¸ (200ì¤„!)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
app.post(&quot;/api/posts&quot;, authenticateToken, async (req, res) =&gt; {
  const client = await pool.connect();

  try {
    await client.query(&quot;BEGIN&quot;);

    // ë°ì´í„° ê²€ì¦ (50ì¤„)
    const { title, content, hashtags, image } = req.body;
    if (!title || !content) {
      return res.status(400).json({ error: &quot;Missing fields&quot; });
    }

    // ì´ë¯¸ì§€ ì—…ë¡œë“œ (AWS S3) (100ì¤„)
    let imageUrl = null;
    if (image) {
      const uploadParams = {
        Bucket: &quot;fetpal-images&quot;,
        Key: `posts/${Date.now()}-${image.name}`,
        Body: image.data,
        ContentType: image.mimetype,
      };
      const uploadResult = await s3.upload(uploadParams).promise();
      imageUrl = uploadResult.Location;
    }

    // DB ì‚½ì… (30ì¤„)
    const result = await client.query(
      `INSERT INTO posts (user_id, title, content, hashtags, image_url, created_at)
       VALUES ($1, $2, $3, $4, $5, NOW())
       RETURNING *`,
      [req.user.id, title, content, hashtags, imageUrl]
    );

    // ê¶Œí•œ ê²€ì‚¬ (20ì¤„)
    if (result.rows[0].user_id !== req.user.id) {
      throw new Error(&quot;Unauthorized&quot;);
    }

    // ì‹¤ì‹œê°„ ì•Œë¦¼ (Socket.io) (50ì¤„)
    const io = req.app.get(&quot;socketio&quot;);
    io.to(&quot;posts:public&quot;).emit(&quot;new-post&quot;, result.rows[0]);

    await client.query(&quot;COMMIT&quot;);
    res.json(result.rows[0]);
  } catch (error) {
    await client.query(&quot;ROLLBACK&quot;);
    console.error(error);
    res.status(500).json({ error: &quot;Server error&quot; });
  } finally {
    client.release();
  }
});

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 6. WebSocket ì„¤ì • (100ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const socketIo = require(&quot;socket.io&quot;);
const io = socketIo(server);
// ... ë³µì¡í•œ WebSocket ì„¤ì • ...

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 7. ì„œë²„ ì‹œì‘ (20ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
app.listen(3001, () =&gt; console.log(&quot;Server running&quot;));

// ì´ ì½”ë“œëŸ‰: 500ì¤„+
// ê°œë°œ ì‹œê°„: 2-3ì¼
// ë²„ê·¸ ê°€ëŠ¥ì„±: ë†’ìŒ
// ìœ ì§€ë³´ìˆ˜: ì–´ë ¤ì›€
</code></pre>
<hr />
<h3>2.3. Supabase ë°©ì‹ (50ì¤„!)</h3>
<pre><code class="language-typescript">// âœ… Supabase ë°©ì‹: í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë§Œ (50ì¤„!)

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 1. Supabase Client (ì´ë¯¸ ì„¤ì •ë¨, ì¬ì‚¬ìš©)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
import { supabase } from &quot;@/lib/supabase&quot;;

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 2. ê²Œì‹œê¸€ ì‘ì„± í•¨ìˆ˜ (30ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
export const createPost = async (postData: {
  title: string;
  content: string;
  hashtags: string[];
  image?: File;
}) =&gt; {
  // ì´ë¯¸ì§€ ì—…ë¡œë“œ (Supabase Storage) - 5ì¤„!
  let imageUrl = null;
  if (postData.image) {
    const { data: uploadData, error: uploadError } = await supabase.storage
      .from(&quot;post-images&quot;)
      .upload(`${Date.now()}-${postData.image.name}`, postData.image);

    if (uploadError) throw uploadError;
    imageUrl = uploadData.path;
  }

  // DB ì‚½ì… (RLS ìë™ ì ìš©) - 15ì¤„!
  const { data, error } = await supabase
    .from(&quot;posts&quot;)
    .insert({
      title: postData.title,
      content: postData.content,
      hashtags: postData.hashtags,
      image_url: imageUrl,
      // user_idëŠ” RLSì—ì„œ ìë™ìœ¼ë¡œ auth.uid() ì‚¬ìš© âœ…
      // created_atëŠ” DBì—ì„œ ìë™ìœ¼ë¡œ NOW() ì‚¬ìš© âœ…
      // ê¶Œí•œ ê²€ì‚¬ëŠ” RLSê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ âœ…
    })
    .select()
    .single();

  if (error) throw error;

  // ì‹¤ì‹œê°„ ì•Œë¦¼ì€ ìë™! (Realtime êµ¬ë…ë§Œ í•˜ë©´ ë¨) âœ…

  return data;
};

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 3. ì‹¤ì‹œê°„ êµ¬ë… (20ì¤„)
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
export const useRealtimePosts = () =&gt; {
  const [posts, setPosts] = useState([]);

  useEffect(() =&gt; {
    const channel = supabase
      .channel(&quot;posts:public&quot;)
      .on(
        &quot;postgres_changes&quot;,
        {
          event: &quot;INSERT&quot;,
          schema: &quot;public&quot;,
          table: &quot;posts&quot;,
        },
        (payload) =&gt; {
          setPosts((prev) =&gt; [payload.new, ...prev]);
        }
      )
      .subscribe();

    return () =&gt; channel.unsubscribe();
  }, []);

  return posts;
};

// ì´ ì½”ë“œëŸ‰: 50ì¤„
// ê°œë°œ ì‹œê°„: 1-2ì‹œê°„
// ë²„ê·¸ ê°€ëŠ¥ì„±: ë‚®ìŒ (Supabaseê°€ ì²˜ë¦¬)
// ìœ ì§€ë³´ìˆ˜: ì‰¬ì›€
</code></pre>
<hr />
<h3>2.4. ì½”ë“œ ë¹„êµ ê²°ê³¼</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">í•­ëª©</th>
<th style="text-align: center;">ì „í†µì ì¸ ë°©ë²•</th>
<th style="text-align: center;">Supabase</th>
<th style="text-align: center;">ê°œì„ ìœ¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>ì½”ë“œëŸ‰</strong></td>
<td style="text-align: center;">500ì¤„</td>
<td style="text-align: center;">50ì¤„</td>
<td style="text-align: center;"><strong>90% ê°ì†Œ</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì„œë²„ ì½”ë“œ</strong></td>
<td style="text-align: center;">í•„ìš” (Express)</td>
<td style="text-align: center;">ë¶ˆí•„ìš”</td>
<td style="text-align: center;"><strong>100% ì œê±°</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì¸ì¦ ì½”ë“œ</strong></td>
<td style="text-align: center;">ì§ì ‘ êµ¬í˜„ (JWT)</td>
<td style="text-align: center;">ìë™ ì œê³µ</td>
<td style="text-align: center;"><strong>100% ì œê±°</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì´ë¯¸ì§€ ì—…ë¡œë“œ</strong></td>
<td style="text-align: center;">AWS S3 ì„¤ì • (100ì¤„)</td>
<td style="text-align: center;">Supabase Storage (5ì¤„)</td>
<td style="text-align: center;"><strong>95% ê°ì†Œ</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì‹¤ì‹œê°„ ì½”ë“œ</strong></td>
<td style="text-align: center;">Socket.io (100ì¤„)</td>
<td style="text-align: center;">Realtime (20ì¤„)</td>
<td style="text-align: center;"><strong>80% ê°ì†Œ</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ë³´ì•ˆ ê²€ì‚¬</strong></td>
<td style="text-align: center;">ìˆ˜ë™ (ifë¬¸)</td>
<td style="text-align: center;">RLS ìë™</td>
<td style="text-align: center;"><strong>100% ìë™í™”</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì—ëŸ¬ ê°€ëŠ¥ì„±</strong></td>
<td style="text-align: center;">ë†’ìŒ</td>
<td style="text-align: center;">ë‚®ìŒ</td>
<td style="text-align: center;"><strong>5ë°° ì•ˆì „</strong> âœ…</td>
</tr>
</tbody>
</table>
<hr />
<h2>ğŸ” 3. RLS (Row Level Security) - Supabaseì˜ í•µì‹¬!</h2>
<h3>3.1. RLSë€? (1ë¶„ë§Œì— ì´í•´)</h3>
<p><strong>RLS (Row Level Security)</strong>: í–‰ ë‹¨ìœ„ ë³´ì•ˆ</p>
<p><strong>í•œ ì¤„ ìš”ì•½</strong>: "ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ê¶Œí•œì„ ì²´í¬í•´ì£¼ëŠ” ë§ˆë²• ê°™ì€ ê¸°ëŠ¥"</p>
<p>ğŸ’¡ <strong>ìš©ì–´ ì„¤ëª…</strong>:</p>
<ul>
<li><strong>Row (í–‰)</strong>: ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ê° ë°ì´í„° í•œ ì¤„ (ì˜ˆ: ê²Œì‹œê¸€ 1ê°œ, ëŒ“ê¸€ 1ê°œ)</li>
<li><strong>Level Security</strong>: í–‰ ë‹¨ìœ„ë¡œ ì ‘ê·¼ ê¶Œí•œì„ ì œì–´í•˜ëŠ” ë³´ì•ˆ ê¸°ëŠ¥</li>
</ul>
<pre><code>ì „í†µì ì¸ ë°©ì‹:
  ê°œë°œìê°€ ì§ì ‘ ifë¬¸ìœ¼ë¡œ ê¶Œí•œ ì²´í¬
  â†’ ì‹¤ìˆ˜í•˜ë©´ ë³´ì•ˆ êµ¬ë©!

RLS ë°©ì‹:
  ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ê¶Œí•œ ì²´í¬
  â†’ ì‹¤ìˆ˜ ë¶ˆê°€ëŠ¥!
</code></pre>
<hr />
<h3>3.2. ì „í†µì ì¸ ë³´ì•ˆ vs RLS</h3>
<h4>âŒ ì „í†µì ì¸ ë³´ì•ˆ (ì„œë²„ ì½”ë“œì—ì„œ ìˆ˜ë™)</h4>
<pre><code class="language-typescript">// âŒ ì„œë²„ ì½”ë“œì—ì„œ ìˆ˜ë™ ê¶Œí•œ ê²€ì‚¬
app.get(&quot;/api/posts/:id&quot;, authenticateToken, async (req, res) =&gt; {
  const post = await db.query(&quot;SELECT * FROM posts WHERE id = $1&quot;, [
    req.params.id,
  ]);

  // ê°œë°œìê°€ ì§ì ‘ ê¶Œí•œ ê²€ì‚¬ (ì‹¤ìˆ˜í•˜ê¸° ì‰¬ì›€!)
  if (post.is_private &amp;&amp; post.user_id !== req.user.id) {
    return res.status(403).json({ error: &quot;Unauthorized&quot; });
  }

  res.json(post);
});

// ë¬¸ì œì :
// 1. ê°œë°œìê°€ ì§ì ‘ ê¶Œí•œ ê²€ì‚¬ ì½”ë“œ ì‘ì„± (ì‹¤ìˆ˜ ê°€ëŠ¥)
// 2. ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ë§ˆë‹¤ ì¤‘ë³µ ì½”ë“œ
// 3. ê¶Œí•œ ê²€ì‚¬ ëˆ„ë½ ì‹œ ë³´ì•ˆ ì·¨ì•½ì 
// 4. ë³µì¡í•œ ê¶Œí•œ ë¡œì§ì€ ì½”ë“œê°€ ì§€ì €ë¶„í•´ì§
</code></pre>
<h4>âœ… RLS (ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ ì²˜ë¦¬)</h4>
<pre><code class="language-sql">-- âœ… RLS ì •ì±… (DB ë ˆë²¨ì—ì„œ ìë™ ì ìš©)

-- 1. ì¡°íšŒ ì •ì±…: ê³µê°œ ê²Œì‹œê¸€ ë˜ëŠ” ë³¸ì¸ ê²Œì‹œê¸€ë§Œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY &quot;Users can view public posts or own posts&quot;
ON public.posts
FOR SELECT
TO authenticated
USING (
  is_private = false
  OR
  user_id = auth.uid()
);

-- 2. ìˆ˜ì • ì •ì±…: ë³¸ì¸ ê²Œì‹œê¸€ë§Œ ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY &quot;Users can update own posts&quot;
ON public.posts
FOR UPDATE
TO authenticated
USING (user_id = auth.uid())
WITH CHECK (user_id = auth.uid());

-- 3. ì‚­ì œ ì •ì±…: ë³¸ì¸ ê²Œì‹œê¸€ë§Œ ì‚­ì œ ê°€ëŠ¥
CREATE POLICY &quot;Users can delete own posts&quot;
ON public.posts
FOR DELETE
TO authenticated
USING (user_id = auth.uid());

-- 4. ì‚½ì… ì •ì±…: ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ê²Œì‹œê¸€ ì‘ì„± ê°€ëŠ¥
CREATE POLICY &quot;Authenticated users can create posts&quot;
ON public.posts
FOR INSERT
TO authenticated
WITH CHECK (user_id = auth.uid());
</code></pre>
<p><strong>í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë§¤ìš° ë‹¨ìˆœí•´ì§</strong>:</p>
<pre><code class="language-typescript">// âœ… RLS ë•ë¶„ì— ê¶Œí•œ ê²€ì‚¬ ì½”ë“œ ë¶ˆí•„ìš”!
const { data, error } = await supabase
  .from(&quot;posts&quot;)
  .select(&quot;*&quot;)
  .eq(&quot;id&quot;, postId)
  .single();

// RLSê°€ ìë™ìœ¼ë¡œ:
// 1. ì‚¬ìš©ì ì¸ì¦ í™•ì¸ âœ…
// 2. ê¶Œí•œ ê²€ì‚¬ (ê³µê°œ ê²Œì‹œê¸€ OR ë³¸ì¸ ê²Œì‹œê¸€) âœ…
// 3. ê¶Œí•œ ì—†ìœ¼ë©´ ë¹ˆ ê²°ê³¼ ë°˜í™˜ âœ…
</code></pre>
<hr />
<h3>3.3. RLS ì¥ì  (ìˆ«ìë¡œ ì¦ëª…!)</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">í•­ëª©</th>
<th style="text-align: center;">ì „í†µì ì¸ ë³´ì•ˆ</th>
<th style="text-align: center;">RLS</th>
<th style="text-align: center;">ê°œì„ ìœ¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>ì½”ë“œ ë³µì¡ë„</strong></td>
<td style="text-align: center;">ë†’ìŒ (ifë¬¸ ë‚¨ë°œ)</td>
<td style="text-align: center;">ë‚®ìŒ (ìë™)</td>
<td style="text-align: center;"><strong>80% ê°ì†Œ</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ë³´ì•ˆ ëˆ„ë½</strong></td>
<td style="text-align: center;">ë†’ìŒ (ê°œë°œì ì‹¤ìˆ˜)</td>
<td style="text-align: center;">ì—†ìŒ (DB ê°•ì œ)</td>
<td style="text-align: center;"><strong>100% ë°©ì§€</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ìœ ì§€ë³´ìˆ˜</strong></td>
<td style="text-align: center;">ì–´ë ¤ì›€ (ì¤‘ë³µ ì½”ë“œ)</td>
<td style="text-align: center;">ì‰¬ì›€ (í•œ ê³³ë§Œ)</td>
<td style="text-align: center;"><strong>5ë°° ì‰¬ì›€</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì„±ëŠ¥</strong></td>
<td style="text-align: center;">ë‚®ìŒ (ì¶”ê°€ ì¿¼ë¦¬)</td>
<td style="text-align: center;">ë†’ìŒ (DB ìµœì í™”)</td>
<td style="text-align: center;"><strong>2ë°° ë¹ ë¦„</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>í…ŒìŠ¤íŠ¸</strong></td>
<td style="text-align: center;">ì–´ë ¤ì›€ (ëª¨ë“  ì¼€ì´ìŠ¤)</td>
<td style="text-align: center;">ì‰¬ì›€ (ì •ì±…ë§Œ)</td>
<td style="text-align: center;"><strong>3ë°° ë¹ ë¦„</strong> âœ…</td>
</tr>
</tbody>
</table>
<hr />
<h3>3.4. Fetpal í”„ë¡œì íŠ¸ RLS í†µê³„</h3>
<pre><code>ì´ 47ê°œ RLS ì •ì±… í™œì„±í™” âœ…

ğŸ“Œ í…Œì´ë¸”ë³„ ì •ì±…:
â”œâ”€ User &amp; Auth (8ê°œ)
â”‚  â”œâ”€ profiles: ë³¸ì¸ë§Œ ì¡°íšŒ/ìˆ˜ì •
â”‚  â””â”€ palProfiles: ë³¸ì¸ ë°˜ë ¤ë™ë¬¼ë§Œ ê´€ë¦¬
â”‚
â”œâ”€ Community (12ê°œ)
â”‚  â”œâ”€ posts: ê³µê°œê¸€ì€ ëª¨ë‘ ì¡°íšŒ, ë³¸ì¸ë§Œ ìˆ˜ì •/ì‚­ì œ
â”‚  â”œâ”€ comments: ëª¨ë‘ ì¡°íšŒ, ë³¸ì¸ë§Œ ìˆ˜ì •/ì‚­ì œ
â”‚  â””â”€ likes: ëª¨ë‘ ì¡°íšŒ, ë³¸ì¸ë§Œ ì¶”ê°€/ì‚­ì œ
â”‚
â”œâ”€ Planner (8ê°œ)
â”‚  â”œâ”€ events: ë³¸ì¸ë§Œ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ
â”‚  â””â”€ expenses: ë³¸ì¸ë§Œ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ
â”‚
â”œâ”€ Lifestyle (7ê°œ)
â”‚  â”œâ”€ chatRooms: 2km ë°˜ê²½ ë‚´ë§Œ ì¡°íšŒ ê°€ëŠ¥
â”‚  â””â”€ chatMessages: ë©¤ë²„ë§Œ ì¡°íšŒ ê°€ëŠ¥
â”‚
â””â”€ Vaccination (12ê°œ)
   â””â”€ vaccinations: ë³¸ì¸ ë°˜ë ¤ë™ë¬¼ë§Œ ì¡°íšŒ/ìˆ˜ì •
</code></pre>
<hr />
<h2>ğŸ’¡ 4. ì™œ Supabaseë¥¼ ì„ íƒí–ˆë‚˜ìš”?</h2>
<h3>4.1. ì£¼ìš” BaaS í”Œë«í¼ ë¹„êµ</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">í•­ëª©</th>
<th style="text-align: center;">Firebase</th>
<th style="text-align: center;">AWS Amplify</th>
<th style="text-align: center;"><strong>Supabase</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>DB íƒ€ì…</strong></td>
<td style="text-align: center;">NoSQL (Firestore)</td>
<td style="text-align: center;">NoSQL (DynamoDB)</td>
<td style="text-align: center;"><strong>SQL (PostgreSQL)</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ë³µì¡í•œ ì¿¼ë¦¬</strong></td>
<td style="text-align: center;">âŒ ì œí•œì </td>
<td style="text-align: center;">âŒ ì œí•œì </td>
<td style="text-align: center;"><strong>âœ… ì§€ì›</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì‹¤ì‹œê°„ ê¸°ëŠ¥</strong></td>
<td style="text-align: center;">âœ… ì§€ì›</td>
<td style="text-align: center;">âš ï¸ ë³µì¡í•¨</td>
<td style="text-align: center;"><strong>âœ… WebSocket ê¸°ë³¸</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì˜¤í”ˆì†ŒìŠ¤</strong></td>
<td style="text-align: center;">âŒ í´ë¡œì¦ˆë“œ</td>
<td style="text-align: center;">âŒ í´ë¡œì¦ˆë“œ</td>
<td style="text-align: center;"><strong>âœ… 100% ì˜¤í”ˆì†ŒìŠ¤</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>ë²¤ë” ë½ì¸</strong></td>
<td style="text-align: center;">âš ï¸ ë†’ìŒ</td>
<td style="text-align: center;">âš ï¸ ë§¤ìš° ë†’ìŒ</td>
<td style="text-align: center;"><strong>âœ… ì—†ìŒ</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>ê°€ê²©</strong></td>
<td style="text-align: center;">ë¹„ìŒˆ ($25/ì›”~)</td>
<td style="text-align: center;">ë§¤ìš° ë¹„ìŒˆ ($50/ì›”~)</td>
<td style="text-align: center;"><strong>ë¬´ë£Œ í‹°ì–´</strong> âœ…</td>
</tr>
<tr>
<td style="text-align: left;"><strong>íƒ€ì… ì•ˆì •ì„±</strong></td>
<td style="text-align: center;">âš ï¸ ì•½í•¨</td>
<td style="text-align: center;">âš ï¸ ì•½í•¨</td>
<td style="text-align: center;"><strong>âœ… TS ìë™ ìƒì„±</strong></td>
</tr>
<tr>
<td style="text-align: left;"><strong>í•™ìŠµ ê³¡ì„ </strong></td>
<td style="text-align: center;">ë‚®ìŒ</td>
<td style="text-align: center;">ë†’ìŒ</td>
<td style="text-align: center;"><strong>ì¤‘ê°„</strong></td>
</tr>
</tbody>
</table>
<hr />
<h3>4.2. Supabaseë¥¼ ì„ íƒí•œ 5ê°€ì§€ ì´ìœ </h3>
<h4>1ï¸âƒ£ PostgreSQL (ê´€ê³„í˜• DB)</h4>
<p><strong>ë³µì¡í•œ ì¿¼ë¦¬ ê°€ëŠ¥</strong>:</p>
<pre><code class="language-sql">-- âœ… Supabaseì—ì„œëŠ” ê°€ëŠ¥ (Firebase/AmplifyëŠ” ì–´ë ¤ì›€)
SELECT
  p.*,
  COUNT(c.id) as comment_count,
  COUNT(l.id) as like_count
FROM posts p
LEFT JOIN comments c ON p.id = c.post_id
LEFT JOIN likes l ON p.id = l.post_id
WHERE p.created_at &gt; NOW() - INTERVAL '7 days'
GROUP BY p.id
ORDER BY like_count DESC
LIMIT 10;
</code></pre>
<hr />
<h4>2ï¸âƒ£ ì‹¤ì‹œê°„ ê¸°ëŠ¥ (WebSocket ë‚´ì¥)</h4>
<p><strong>ì½”ë“œ 3ì¤„ë¡œ ì‹¤ì‹œê°„ êµ¬ë…</strong>:</p>
<pre><code class="language-typescript">// âœ… ì‹¤ì‹œê°„ ëŒ“ê¸€ êµ¬ë… (3ì¤„!)
const channel = supabase
  .channel(`post:${postId}`)
  .on(
    &quot;postgres_changes&quot;,
    { event: &quot;INSERT&quot;, schema: &quot;public&quot;, table: &quot;comments&quot; },
    (payload) =&gt; setComments((prev) =&gt; [...prev, payload.new])
  )
  .subscribe();
</code></pre>
<hr />
<h4>3ï¸âƒ£ ì˜¤í”ˆì†ŒìŠ¤ (Lock-in ì—†ìŒ)</h4>
<ul>
<li>ì–¸ì œë“ ì§€ ë‹¤ë¥¸ PostgreSQLë¡œ ì´ì „ ê°€ëŠ¥</li>
<li>ì½”ë“œ ì†Œìœ ê¶Œ 100%</li>
<li>ì»¤ìŠ¤í„°ë§ˆì´ì§• ììœ ë¡œì›€</li>
</ul>
<hr />
<h4>4ï¸âƒ£ ë¬´ë£Œ í‹°ì–´ (í•™ìƒ í”„ë¡œì íŠ¸ì— ì í•©!)</h4>
<ul>
<li>500MB ë°ì´í„°ë² ì´ìŠ¤</li>
<li>1GB ìŠ¤í† ë¦¬ì§€</li>
<li>50,000 ì›”ê°„ í™œì„± ì‚¬ìš©ì</li>
<li><strong>Fetpal í”„ë¡œì íŠ¸ ê·œëª¨ì— ì í•©</strong></li>
</ul>
<hr />
<h4>5ï¸âƒ£ TypeScript íƒ€ì… ìë™ ìƒì„±</h4>
<pre><code class="language-bash"># âœ… í•œ ì¤„ ëª…ë ¹ì–´ë¡œ íƒ€ì… ìë™ ìƒì„±
supabase gen types typescript &gt; database.types.ts
</code></pre>
<pre><code class="language-typescript">// âœ… ìë™ ìƒì„±ëœ íƒ€ì…ìœ¼ë¡œ 100% íƒ€ì… ì•ˆì „
type Post = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;posts&quot;][&quot;Row&quot;];

const posts: Post[] = await supabase.from(&quot;posts&quot;).select(&quot;*&quot;);
// â†‘ ìë™ì™„ì„± + íƒ€ì… ì²´í¬! âœ…
</code></pre>
<hr />
<h2>ğŸ“Š 5. Fetpal í”„ë¡œì íŠ¸ ì„±ê³¼</h2>
<h3>5.1. ê°œë°œ íš¨ìœ¨ì„±</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">ì§€í‘œ</th>
<th style="text-align: center;">ìˆ˜ì¹˜</th>
<th style="text-align: left;">ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Hook Composition</strong></td>
<td style="text-align: center;">60% ì½”ë“œ ê°ì†Œ</td>
<td style="text-align: left;">676ì¤„ â†’ 165ì¤„</td>
</tr>
<tr>
<td style="text-align: left;"><strong>RLS ì •ì±…</strong></td>
<td style="text-align: center;">47ê°œ í™œì„±í™”</td>
<td style="text-align: left;">ìë™ ë³´ì•ˆ ì ìš©</td>
</tr>
<tr>
<td style="text-align: left;"><strong>API ì—”ë“œí¬ì¸íŠ¸</strong></td>
<td style="text-align: center;">0ê°œ</td>
<td style="text-align: left;">Supabaseê°€ ìë™ ìƒì„±</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì‹¤ì‹œê°„ ì±„ë„</strong></td>
<td style="text-align: center;">8ê°œ</td>
<td style="text-align: left;">Supabase Realtime</td>
</tr>
<tr>
<td style="text-align: left;"><strong>TypeScript íƒ€ì…</strong></td>
<td style="text-align: center;">100% ìë™ ìƒì„±</td>
<td style="text-align: left;">MCP ë•ë¶„</td>
</tr>
</tbody>
</table>
<hr />
<h3>5.2. ì„±ëŠ¥ ì§€í‘œ</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">ì§€í‘œ</th>
<th style="text-align: center;">ìˆ˜ì¹˜</th>
<th style="text-align: left;">ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>API ì‘ë‹µ ì‹œê°„</strong></td>
<td style="text-align: center;">í‰ê·  150ms</td>
<td style="text-align: left;">Supabase (ê¸€ë¡œë²Œ CDN)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì‹¤ì‹œê°„ ì§€ì—°</strong></td>
<td style="text-align: center;">50ms ì´ë‚´</td>
<td style="text-align: left;">WebSocket</td>
</tr>
<tr>
<td style="text-align: left;"><strong>í˜ì´ì§€ ë¡œë”©</strong></td>
<td style="text-align: center;">~2ì´ˆ</td>
<td style="text-align: left;">Next.js 14 + Supabase</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ì´ë¯¸ì§€ ë¡œë”©</strong></td>
<td style="text-align: center;">300ms</td>
<td style="text-align: left;">Supabase Storage + CDN</td>
</tr>
</tbody>
</table>
<hr />
<h2>ğŸ“ 6. í•™ìŠµ ë¦¬ì†ŒìŠ¤</h2>
<h3>ğŸ“š ê³µì‹ ë¬¸ì„œ</h3>
<ol>
<li><strong>Supabase</strong>: https://supabase.com/docs</li>
<li><strong>Next.js 14</strong>: https://nextjs.org/docs</li>
<li><strong>PostgreSQL</strong>: https://www.postgresql.org/docs/</li>
<li><strong>MCP</strong>: https://modelcontextprotocol.io/</li>
</ol>
<h3>ğŸ¬ ì¶”ì²œ íŠœí† ë¦¬ì–¼</h3>
<ol>
<li><strong>Supabase + Next.js</strong>: https://www.youtube.com/watch?v=w3h1G8SsW7Y</li>
<li><strong>RLS íŠœí† ë¦¬ì–¼</strong>: https://supabase.com/docs/guides/auth/row-level-security</li>
<li><strong>Realtime êµ¬ë…</strong>: https://supabase.com/docs/guides/realtime</li>
</ol>
<hr />
<h2>â“ 7. FAQ: "Supabase ì“°ë©´ ë°°ìš°ëŠ” ê²Œ ì—†ì§€ ì•Šë‚˜ìš”?"</h2>
<h3>ğŸ“ ìì£¼ ë°›ëŠ” ì§ˆë¬¸</h3>
<blockquote>
<p>"Supabase ê°™ì€ BaaSë¥¼ ì“°ë©´ í¸í•˜ê¸´ í•˜ê² ì§€ë§Œ, ë°±ì—”ë“œ ê°œë°œì„ ë°°ìš°ëŠ” ê²Œ ì—†ëŠ” ê±° ì•„ë‹Œê°€ìš”?"</p>
</blockquote>
<p>ì´ ì§ˆë¬¸ì„ ìì£¼ ë°›ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ <strong>ì˜¤íˆë ¤ ë°˜ëŒ€</strong>ì…ë‹ˆë‹¤!</p>
<hr />
<h3>âœ… 1. Supabaseë¡œ ë°°ìš°ëŠ” ê²ƒë“¤ (ë§ìŠµë‹ˆë‹¤!)</h3>
<h4>ğŸ“Œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë° SQL</h4>
<p><strong>ì „í†µì ì¸ ë°©ì‹ë³´ë‹¤ ë” ê¹Šê²Œ ë°°ì›€</strong>:</p>
<pre><code class="language-sql">-- âœ… Supabaseë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°°ìš°ëŠ” ê²ƒë“¤:

-- 1. í…Œì´ë¸” ì„¤ê³„ ë° ê´€ê³„ ì„¤ì •
CREATE TABLE posts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  content TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. ì¸ë±ìŠ¤ ìµœì í™” (ì„±ëŠ¥ í–¥ìƒ)
CREATE INDEX idx_posts_user_id ON posts(user_id);
CREATE INDEX idx_posts_created_at ON posts(created_at DESC);

-- 3. ë³µì¡í•œ JOIN ì¿¼ë¦¬
SELECT
  p.*,
  prof.username,
  COUNT(c.id) as comment_count
FROM posts p
LEFT JOIN profiles prof ON p.user_id = prof.id
LEFT JOIN comments c ON p.id = c.post_id
GROUP BY p.id, prof.username;

-- 4. íŠ¸ë¦¬ê±° ë° í•¨ìˆ˜ (ê³ ê¸‰ ê¸°ëŠ¥)
CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
</code></pre>
<p><strong>ë°°ìš°ëŠ” ë‚´ìš©</strong>:</p>
<ul>
<li>âœ… <strong>PostgreSQL ê´€ê³„í˜• DB ì„¤ê³„</strong>: í…Œì´ë¸” ê°„ì˜ ê´€ê³„ë¥¼ ì •ì˜í•˜ê³  ë°ì´í„° êµ¬ì¡°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ë°©ë²•</li>
<li>âœ… <strong>ì •ê·œí™” (1NF, 2NF, 3NF)</strong>: ë°ì´í„° ì¤‘ë³µì„ ì œê±°í•˜ê³  íš¨ìœ¨ì ì¸ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ê·œì¹™ (ì˜ˆ: ë°˜ë³µë˜ëŠ” ë°ì´í„°ë¥¼ ë³„ë„ í…Œì´ë¸”ë¡œ ë¶„ë¦¬)</li>
<li>âœ… <strong>ì™¸ë˜í‚¤ ë° ì œì•½ì¡°ê±´</strong>: í…Œì´ë¸” ê°„ì˜ ì°¸ì¡° ê´€ê³„ë¥¼ ë³´ì¥í•˜ê³ , ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ê·œì¹™ (ì˜ˆ: <code>ON DELETE CASCADE</code>)</li>
<li>âœ… <strong>íŠ¸ëœì­ì…˜ ë° ACID ì†ì„±</strong>: ì—¬ëŸ¬ DB ì‘ì—…ì„ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ë¬¶ì–´ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²• (ì›ìì„±, ì¼ê´€ì„±, ê²©ë¦¬ì„±, ì§€ì†ì„±)</li>
<li>âœ… <strong>ì¿¼ë¦¬ ìµœì í™” ë° ì¸ë±ì‹±</strong>: ë°ì´í„° ì¡°íšŒ ì†ë„ë¥¼ ë¹ ë¥´ê²Œ ë§Œë“œëŠ” ê¸°ë²• (ì¸ë±ìŠ¤ëŠ” ì±…ì˜ ëª©ì°¨ì²˜ëŸ¼ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ê²Œ í•´ì¤Œ)</li>
</ul>
<hr />
<h4>ğŸ“Œ ë³´ì•ˆ ê°œë… (RLS)</h4>
<p><strong>ì „í†µì ì¸ ifë¬¸ ê¶Œí•œ ê²€ì‚¬ë³´ë‹¤ í›¨ì”¬ ê³ ê¸‰</strong>:</p>
<pre><code class="language-sql">-- âœ… RLS ì •ì±… ì‘ì„±í•˜ë©´ì„œ ë°°ìš°ëŠ” ê²ƒë“¤:

-- 1. ì¸ì¦/ì¸ê°€ì˜ ì°¨ì´ ì´í•´
-- ì¸ì¦(Authentication): ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì¸
-- ì¸ê°€(Authorization): ì‚¬ìš©ìê°€ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ ê²°ì •

-- 2. ë³µì¡í•œ ê¶Œí•œ ë¡œì§ êµ¬í˜„
CREATE POLICY &quot;Users can view nearby chat rooms&quot;
ON chat_rooms
FOR SELECT
TO authenticated
USING (
  -- ê±°ë¦¬ ê³„ì‚° (PostGIS í™•ì¥ ì‚¬ìš©)
  ST_DWithin(
    location::geography,
    (SELECT location FROM profiles WHERE id = auth.uid())::geography,
    2000  -- 2km
  )
);

-- 3. ë‹¤ì¤‘ ì¡°ê±´ ë³´ì•ˆ ì •ì±…
CREATE POLICY &quot;Users can update own posts within 24 hours&quot;
ON posts
FOR UPDATE
TO authenticated
USING (
  user_id = auth.uid()
  AND
  created_at &gt; NOW() - INTERVAL '24 hours'
);
</code></pre>
<p><strong>ë°°ìš°ëŠ” ë‚´ìš©</strong>:</p>
<ul>
<li>âœ… <strong>ì¸ì¦(Authentication) vs ì¸ê°€(Authorization)</strong>: ì¸ì¦ì€ "ëˆ„êµ¬ì¸ê°€?" (ë¡œê·¸ì¸), ì¸ê°€ëŠ” "ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ê°€?" (ê¶Œí•œ)</li>
<li>âœ… <strong>JWT í† í° êµ¬ì¡° ì´í•´</strong>: ì‚¬ìš©ì ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì•”í˜¸í™”í•´ì„œ ì „ë‹¬í•˜ëŠ” í† í° ë°©ì‹ (Header.Payload.Signature êµ¬ì¡°)</li>
<li>âœ… <strong>Row Level Security ê°œë…</strong>: ë°ì´í„°ë² ì´ìŠ¤ì˜ ê° í–‰(Row)ë§ˆë‹¤ ì ‘ê·¼ ê¶Œí•œì„ ì„¤ì •í•˜ëŠ” ê³ ê¸‰ ë³´ì•ˆ ê¸°ë²•</li>
<li>âœ… <strong>ë³´ì•ˆ ì •ì±… ì„¤ê³„ (Principle of Least Privilege)</strong>: "í•„ìš”í•œ ìµœì†Œí•œì˜ ê¶Œí•œë§Œ ë¶€ì—¬" ì›ì¹™ìœ¼ë¡œ ë³´ì•ˆ êµ¬ë© ë°©ì§€</li>
<li>âœ… <strong>SQL ê¸°ë°˜ ê¶Œí•œ ì œì–´</strong>: SQL ì •ì±…ìœ¼ë¡œ ê¶Œí•œì„ ê´€ë¦¬í•˜ì—¬ ì½”ë“œ ì‹¤ìˆ˜ë¡œ ì¸í•œ ë³´ì•ˆ ì·¨ì•½ì  ì›ì²œ ì°¨ë‹¨</li>
</ul>
<hr />
<h4>ğŸ“Œ API ì„¤ê³„ ë° RESTful ì›ì¹™</h4>
<p><strong>Supabase APIë¥¼ ì‚¬ìš©í•˜ë©´ì„œ REST ì›ì¹™ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë°°ì›€</strong>:</p>
<pre><code class="language-typescript">// âœ… RESTful API ì›ì¹™ì„ ì½”ë“œë¡œ ë°°ìš°ê¸°

// 1. GET: ì¡°íšŒ (Read)
const { data } = await supabase.from(&quot;posts&quot;).select(&quot;*&quot;).eq(&quot;id&quot;, postId);

// 2. POST: ìƒì„± (Create)
const { data } = await supabase.from(&quot;posts&quot;).insert({ title, content });

// 3. PATCH: ìˆ˜ì • (Update)
const { data } = await supabase
  .from(&quot;posts&quot;)
  .update({ title: newTitle })
  .eq(&quot;id&quot;, postId);

// 4. DELETE: ì‚­ì œ (Delete)
const { data } = await supabase.from(&quot;posts&quot;).delete().eq(&quot;id&quot;, postId);
</code></pre>
<p><strong>ë°°ìš°ëŠ” ë‚´ìš©</strong>:</p>
<ul>
<li>âœ… <strong>CRUD ì—°ì‚° (Create, Read, Update, Delete)</strong>: ë°ì´í„°ì˜ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ - ëª¨ë“  ì•±ì˜ ê¸°ë³¸ ë™ì‘</li>
<li>âœ… <strong>RESTful API ì„¤ê³„ ì›ì¹™</strong>: URLê³¼ HTTP ë©”ì„œë“œë¥¼ í‘œì¤€í™”ëœ ë°©ì‹ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ê·œì¹™ (ì˜ˆ: <code>/posts/:id</code>ëŠ” ê²Œì‹œê¸€ ì¡°íšŒ)</li>
<li>âœ… <strong>HTTP ë©”ì„œë“œ (GET, POST, PATCH, DELETE)</strong>: GET=ì¡°íšŒ, POST=ìƒì„±, PATCH=ìˆ˜ì •, DELETE=ì‚­ì œ (ê° ë™ì‘ì˜ ëª…í™•í•œ ì—­í• )</li>
<li>âœ… <strong>ìƒíƒœ ì½”ë“œ (200, 400, 401, 403, 500)</strong>: 200=ì„±ê³µ, 400=ì˜ëª»ëœ ìš”ì²­, 401=ì¸ì¦ í•„ìš”, 403=ê¶Œí•œ ì—†ìŒ, 500=ì„œë²„ ì˜¤ë¥˜</li>
<li>âœ… <strong>í•„í„°ë§, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜</strong>: ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ê¸°ë²• (ê²€ìƒ‰, ì •ë ¬, í˜ì´ì§€ ë‚˜ëˆ„ê¸°)</li>
</ul>
<hr />
<h4>ğŸ“Œ ì‹¤ì‹œê°„ í†µì‹  (WebSocket)</h4>
<p><strong>Socket.ioë¥¼ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¤ ê°œë…ì„ ë” ì˜ ì´í•´</strong>:</p>
<pre><code class="language-typescript">// âœ… ì‹¤ì‹œê°„ í†µì‹  ê°œë… ë°°ìš°ê¸°

// 1. Pub/Sub íŒ¨í„´ ì´í•´
const channel = supabase
  .channel(&quot;posts:public&quot;) // ì±„ë„ êµ¬ë…
  .on(
    &quot;postgres_changes&quot;,
    { event: &quot;INSERT&quot;, schema: &quot;public&quot;, table: &quot;posts&quot; },
    (payload) =&gt; {
      console.log(&quot;ìƒˆ ê²Œì‹œê¸€:&quot;, payload.new);
    }
  )
  .subscribe();

// 2. Presence (ì˜¨ë¼ì¸ ìƒíƒœ ì¶”ì )
const presenceChannel = supabase
  .channel(&quot;room:1&quot;)
  .on(&quot;presence&quot;, { event: &quot;sync&quot; }, () =&gt; {
    const state = presenceChannel.presenceState();
    console.log(&quot;í˜„ì¬ ì ‘ì†ì:&quot;, state);
  })
  .subscribe(async (status) =&gt; {
    if (status === &quot;SUBSCRIBED&quot;) {
      await presenceChannel.track({ user_id: userId, online_at: new Date() });
    }
  });
</code></pre>
<p><strong>ë°°ìš°ëŠ” ë‚´ìš©</strong>:</p>
<ul>
<li>âœ… <strong>WebSocket vs HTTP ì°¨ì´</strong>: HTTPëŠ” ìš”ì²­-ì‘ë‹µ ë°©ì‹, WebSocketì€ ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  (ì±„íŒ…ì— í•„ìˆ˜)</li>
<li>âœ… <strong>Pub/Sub íŒ¨í„´</strong>: ë°œí–‰ì(Publisher)ê°€ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´ êµ¬ë…ì(Subscriber)ê°€ ë°›ëŠ” êµ¬ì¡° (1:N í†µì‹ )</li>
<li>âœ… <strong>ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì²˜ë¦¬</strong>: ë°ì´í„°ê°€ ë³€ê²½ë˜ëŠ” ì¦‰ì‹œ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ë°©ë²• (ìƒˆ ëŒ“ê¸€ ì•Œë¦¼ ë“±)</li>
<li>âœ… <strong>ì±„ë„ ë° ë¸Œë¡œë“œìºìŠ¤íŒ…</strong>: íŠ¹ì • ê·¸ë£¹(ì±„ë„)ì—ë§Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ê¸°ë²• (ì±„íŒ…ë°©ë³„ ë©”ì‹œì§€ ë¶„ë¦¬)</li>
<li>âœ… <strong>Presence ë° ì˜¨ë¼ì¸ ìƒíƒœ ê´€ë¦¬</strong>: í˜„ì¬ ì ‘ì† ì¤‘ì¸ ì‚¬ìš©ìë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•˜ëŠ” ê¸°ëŠ¥ ("ì„ì´ë‹˜ì´ ì…ì¥í–ˆìŠµë‹ˆë‹¤")</li>
</ul>
<hr />
<h4>ğŸ“Œ ìŠ¤í† ë¦¬ì§€ ë° íŒŒì¼ ê´€ë¦¬</h4>
<p><strong>AWS S3ë³´ë‹¤ ê°„ë‹¨í•˜ì§€ë§Œ, ê°œë…ì€ ë™ì¼í•˜ê²Œ ë°°ì›€</strong>:</p>
<pre><code class="language-typescript">// âœ… íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ê°œë… ë°°ìš°ê¸°

// 1. íŒŒì¼ ì—…ë¡œë“œ (Multipart Upload)
const { data, error } = await supabase.storage
  .from('avatars')
  .upload(`public/${userId}.png`, file, {
    contentType: 'image/png',
    cacheControl: '3600',
    upsert: true  // ë®ì–´ì“°ê¸°
  });

// 2. ì´ë¯¸ì§€ ë³€í™˜ (Transformation)
const { data: url } = supabase.storage
  .from('avatars')
  .getPublicUrl(`public/${userId}.png`, {
    transform: {
      width: 200,
      height: 200,
      resize: 'cover'
    }
  });

// 3. RLS ì •ì±…ìœ¼ë¡œ íŒŒì¼ ê¶Œí•œ ê´€ë¦¬
CREATE POLICY &quot;Users can upload own avatars&quot;
ON storage.objects
FOR INSERT
TO authenticated
WITH CHECK (
  bucket_id = 'avatars'
  AND
  (storage.foldername(name))[1] = auth.uid()::text
);
</code></pre>
<p><strong>ë°°ìš°ëŠ” ë‚´ìš©</strong>:</p>
<ul>
<li>âœ… <strong>íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ</strong>: ì‚¬ìš©ìê°€ ì˜¬ë¦° ì´ë¯¸ì§€/íŒŒì¼ì„ ì„œë²„ì— ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²•</li>
<li>âœ… <strong>ìºì‹± ë° CDN ê°œë…</strong>: ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì„ ë¹ ë¥´ê²Œ ì œê³µí•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ì„œë²„ì— ë³µì‚¬í•´ë‘ëŠ” ê¸°ìˆ  (ë¡œë”© ì†ë„ í–¥ìƒ)</li>
<li>âœ… <strong>ì´ë¯¸ì§€ ìµœì í™” (Resizing, Format Conversion)</strong>: ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ì‘ê²Œ ë§Œë“¤ê±°ë‚˜ í˜•ì‹ì„ ë³€í™˜í•´ì„œ ìš©ëŸ‰ ì ˆì•½ (ì˜ˆ: 640x640 ì¸ë„¤ì¼)</li>
<li>âœ… <strong>ë²„í‚· ë° ê¶Œí•œ ê´€ë¦¬</strong>: íŒŒì¼ì„ ì €ì¥í•˜ëŠ” í´ë”(ë²„í‚·)ë¥¼ ë§Œë“¤ê³ , ëˆ„ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ì œì–´í•˜ëŠ” ë°©ë²•</li>
<li>âœ… <strong>MIME íƒ€ì… ë° Content-Type</strong>: íŒŒì¼ì˜ ì¢…ë¥˜ë¥¼ ì•Œë ¤ì£¼ëŠ” í‘œì¤€ í˜•ì‹ (ì˜ˆ: <code>image/png</code>, <code>application/pdf</code>)</li>
</ul>
<hr />
<h3>âœ… 2. ë¹„ì „ê³µìì—ê²Œ ì í•©í•œ í•™ìŠµ ì ‘ê·¼</h3>
<h4>ì™œ Supabaseê°€ ë¹„ì „ê³µì í•™ìŠµì— ìœ ë¦¬í•œê°€?</h4>
<p><strong>ì „í†µì ì¸ ë°±ì—”ë“œ í•™ìŠµì˜ ì–´ë ¤ì›€</strong>:</p>
<pre><code>ì „í†µì ì¸ ë°©ì‹ (Node.js + Express):
  1. JavaScript/Node.js ë¬¸ë²• ê³µë¶€
  2. Express í”„ë ˆì„ì›Œí¬ í•™ìŠµ
  3. ë¯¸ë“¤ì›¨ì–´ ê°œë… ì´í•´
  4. ë¼ìš°íŒ… êµ¬ì¡° ì„¤ê³„
  5. ì—ëŸ¬ í•¸ë“¤ë§ íŒ¨í„´
  6. ë³´ì•ˆ ì„¤ì • (CORS, Helmet ë“±)

  â†’ ë°±ì—”ë“œ ê¸°ì´ˆë§Œ 2-3ì£¼ ì†Œìš”
  â†’ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ì€ ê·¸ ì´í›„
  â†’ ë¹„ì „ê³µìì—ê²Œ ì§„ì… ì¥ë²½ì´ ë†’ìŒ
</code></pre>
<p><strong>Supabaseë¥¼ í†µí•œ í•™ìŠµ ì ‘ê·¼</strong>:</p>
<pre><code>Supabase ë°©ì‹:
  1. SQL ë° ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ë¶€í„° ì‹œì‘ âœ…
     â†’ í•µì‹¬ ê°œë…ë¶€í„° ë°°ì›€ (í…Œì´ë¸”, ê´€ê³„, ì¿¼ë¦¬)

  2. RLSë¡œ ë³´ì•ˆ ì •ì±… ì´í•´ âœ…
     â†’ ì½”ë“œê°€ ì•„ë‹Œ ì •ì±…ìœ¼ë¡œ ë³´ì•ˆ ë°°ì›€

  3. TypeScript í´ë¼ì´ì–¸íŠ¸ë¡œ í†µí•© âœ…
     â†’ í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ì—°ê²° êµ¬ì¡° ì´í•´

  4. ì‹¤ì œ ë™ì‘í•˜ëŠ” ì„œë¹„ìŠ¤ êµ¬í˜„ âœ…
     â†’ í•™ìŠµ ë™ê¸° ìœ ì§€ (ê²°ê³¼ë¬¼ì´ ë°”ë¡œ ë³´ì„)

  â†’ ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ì‹¬ í•™ìŠµìœ¼ë¡œ ë³¸ì§ˆì— ì§‘ì¤‘
  â†’ ì„œë²„ ì„¤ì •ì´ ì•„ë‹Œ ë°ì´í„° ì„¤ê³„ ì—­ëŸ‰ í–¥ìƒ
  â†’ ë¹„ì „ê³µìë„ ì‹¤ë¬´ ìˆ˜ì¤€ì˜ ë°±ì—”ë“œ ì´í•´ ê°€ëŠ¥
</code></pre>
<p><strong>í•µì‹¬ ì°¨ì´ì </strong>:</p>
<ul>
<li>âŒ ì „í†µ ë°©ì‹: ë„êµ¬(Express) ì‚¬ìš©ë²•ë¶€í„° ë°°ì›€ â†’ ê°œë… ì´í•´ëŠ” ë‚˜ì¤‘</li>
<li>âœ… Supabase: ê°œë…(DB, ë³´ì•ˆ)ë¶€í„° ë°°ì›€ â†’ ë„êµ¬ëŠ” í•„ìš”í•  ë•Œ ë°°ì›€</li>
</ul>
<hr />
<h3>âœ… 3. í˜„ëŒ€ì ì¸ ê°œë°œ ë°©ì‹ (Modern Stack)</h3>
<h4>ì‹¤ë¬´ì—ì„œë„ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤</h4>
<p><strong>ìœ ëª… ê¸°ì—…ë“¤ì˜ ì„ íƒ</strong>:</p>
<ul>
<li><strong>Netflix</strong>: AWS RDS, S3, Lambda ë“± ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ í™œìš©</li>
<li><strong>Airbnb</strong>: Google Cloud + Firebase</li>
<li><strong>Spotify</strong>: Google Cloud + Kubernetes (ê´€ë¦¬í˜•)</li>
<li><strong>Instagram</strong>: AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ ì¡°í•©</li>
</ul>
<p><strong>ì™œ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í• ê¹Œ?</strong></p>
<pre><code>ì‹¤ë¬´ ê°œë°œì˜ ìš°ì„ ìˆœìœ„:
  1ï¸âƒ£ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ (ê°€ì¥ ì¤‘ìš”)
  2ï¸âƒ£ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
  3ï¸âƒ£ ë°ì´í„° ì„¤ê³„ ë° ìµœì í™”
  4ï¸âƒ£ ë³´ì•ˆ ë° ì„±ëŠ¥

  âŒ ì„œë²„ ì„¤ì •, ì¸í”„ë¼ ê´€ë¦¬ (DevOps íŒ€ ë‹´ë‹¹)
</code></pre>
<p><strong>Supabase = í˜„ëŒ€ì ì¸ ê°œë°œ ë°©ì‹</strong>:</p>
<ul>
<li>âœ… ì¸í”„ë¼ëŠ” ìë™í™”, ê°œë°œìëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì— ì§‘ì¤‘</li>
<li>âœ… PostgreSQL (ì—…ê³„ í‘œì¤€ DB) ê¸°ë°˜ìœ¼ë¡œ ì‹¤ë¬´ ì—­ëŸ‰ í–¥ìƒ</li>
<li>âœ… ì˜¤í”ˆì†ŒìŠ¤ë¼ ë‚´ë¶€ ë™ì‘ í•™ìŠµ ê°€ëŠ¥</li>
<li>âœ… ë‹¤ë¥¸ PostgreSQLë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥ (Lock-in ì—†ìŒ)</li>
</ul>
<hr />
<h3>âœ… 4. ë‹µë³€ ì •ë¦¬</h3>
<h4>ğŸ“Œ ì§ˆë¬¸:</h4>
<blockquote>
<p>"Supabase ì“°ë©´ ë°°ìš°ëŠ” ê²Œ ì—†ì§€ ì•Šë‚˜ìš”?"</p>
</blockquote>
<h4>ğŸ“Œ ë‹µë³€:</h4>
<pre><code>&quot;ì˜¤íˆë ¤ ë°˜ëŒ€ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. Supabaseë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì„ ë°°ì› ìŠµë‹ˆë‹¤:

1ï¸âƒ£ PostgreSQL ë° SQL ì‹¬í™”:
   - ë³µì¡í•œ JOIN, ì¸ë±ì‹±, íŠ¸ë¦¬ê±° ë“± ì§ì ‘ ì‘ì„±
   - ORM ì—†ì´ ìˆœìˆ˜ SQLë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ê²½í—˜

2ï¸âƒ£ ë³´ì•ˆ ê°œë… (RLS):
   - ë‹¨ìˆœ ifë¬¸ì´ ì•„ë‹Œ, ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ì˜ ë³´ì•ˆ ì •ì±… ì„¤ê³„
   - ì¸ì¦/ì¸ê°€ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ ì´í•´

3ï¸âƒ£ ë¹„ì „ê³µì ê´€ì ì˜ íš¨ìœ¨ì  í•™ìŠµ:
   - ì„œë²„ ì„¤ì • ëŒ€ì‹  ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì— ì§‘ì¤‘
   - í•µì‹¬ ê°œë…(DB, ê´€ê³„, ë³´ì•ˆ)ë¶€í„° ë°°ì›Œì„œ ë³¸ì§ˆ ì´í•´
   - ì‹¤ì œ ë™ì‘í•˜ëŠ” ì„œë¹„ìŠ¤ë¡œ í•™ìŠµ ë™ê¸° ìœ ì§€

4ï¸âƒ£ í˜„ëŒ€ì ì¸ ê°œë°œ ë°©ì‹:
   - Netflix, Airbnb ë“±ë„ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ ì‚¬ìš©
   - ì¸í”„ë¼ ìë™í™”ëŠ” í˜„ëŒ€ ê°œë°œì˜ í‘œì¤€
   - ê°œë°œìëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì‹¤ë¬´

5ï¸âƒ£ í™•ì¥ ê°€ëŠ¥ì„± ë° ì´ì‹ì„±:
   - PostgreSQL í‘œì¤€ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ë¥¸ í™˜ê²½ ì´ì „ ê°€ëŠ¥
   - ì˜¤í”ˆì†ŒìŠ¤ë¼ ë‚´ë¶€ ë™ì‘ í•™ìŠµ ë° ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥
   - Lock-in ì—†ì´ ë°°ìš´ ì§€ì‹ì„ ì–´ë””ì„œë‚˜ í™œìš©

ê²°ë¡ : SupabaseëŠ” ë¹„ì „ê³µìê°€ **ë°±ì—”ë“œ í•µì‹¬ ê°œë…**ì„ ë°°ìš°ê¸°ì— ì í•©í•œ
      í˜„ëŒ€ì ì¸ ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤.&quot;
</code></pre>
<hr />
<h3>âœ… 5. ë¹„ìœ ë¡œ ì„¤ëª…í•˜ê¸°</h3>
<h4>ğŸš— ìë™ì°¨ ê°œë°œ ë¹„ìœ :</h4>
<pre><code>âŒ &quot;ìë™ì°¨ë¥¼ ë°°ìš°ë ¤ë©´ ì—”ì§„ë¶€í„° ì§ì ‘ ë§Œë“¤ì–´ì•¼ í•œë‹¤&quot;
   â†’ ëŒ€ë¶€ë¶„ì˜ ê°œë°œìëŠ” ì—”ì§„ì„ ì§ì ‘ ë§Œë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤
   â†’ ì™„ì„±ëœ ì—”ì§„ì„ í™œìš©í•´ì„œ ë” ì¢‹ì€ ìë™ì°¨ë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤

âœ… &quot;Supabase = ì˜ ë§Œë“¤ì–´ì§„ ì—”ì§„&quot;
   â†’ ì—”ì§„(ì„œë²„)ì€ Supabaseê°€ ì œê³µ
   â†’ ê°œë°œìëŠ” ìë™ì°¨(ì•±)ì˜ ë””ìì¸, UX, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘
   â†’ ê²°ê³¼ì ìœ¼ë¡œ ë” ì¢‹ì€ ì œí’ˆì„ ë§Œë“¤ ìˆ˜ ìˆìŒ
</code></pre>
<h4>ğŸ—ï¸ ê±´ì¶• ë¹„ìœ :</h4>
<pre><code>âŒ &quot;ì§‘ì„ ë°°ìš°ë ¤ë©´ ë²½ëŒë¶€í„° ì§ì ‘ êµ¬ì›Œì•¼ í•œë‹¤&quot;
   â†’ ê±´ì¶•ê°€ëŠ” ë²½ëŒì„ ì§ì ‘ ë§Œë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤
   â†’ ì™„ì„±ëœ ë²½ëŒë¡œ ë” ì°½ì˜ì ì¸ ê±´ì¶•ë¬¼ì„ ì„¤ê³„í•©ë‹ˆë‹¤

âœ… &quot;Supabase = ì˜ ë§Œë“¤ì–´ì§„ ê±´ì¶• ìì¬&quot;
   â†’ ê¸°ë³¸ ìì¬(DB, Auth, Storage)ëŠ” ì œê³µë¨
   â†’ ê±´ì¶•ê°€(ê°œë°œì)ëŠ” ì„¤ê³„ì™€ ì¡°í•©ì— ì§‘ì¤‘
   â†’ ê²°ê³¼ì ìœ¼ë¡œ ë” ë©‹ì§„ ê±´ì¶•ë¬¼(ì•±)ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ
</code></pre>
<hr />
<h2>ğŸ“ ìš”ì•½ (5ê°€ì§€ í•µì‹¬!)</h2>
<h3>ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸</h3>
<ol>
<li>
<p><strong>Supabase = BaaS (Backend as a Service)</strong></p>
</li>
<li>
<p>ë°±ì—”ë“œ ê°œë°œ ì‹œê°„ <strong>80% ë‹¨ì¶•</strong> âœ…</p>
</li>
<li>ì„œë²„ ì½”ë“œ <strong>90% ê°ì†Œ</strong> âœ…</li>
<li>
<p>PostgreSQL + Auth + Realtime + Storage ëª¨ë‘ ì œê³µ</p>
</li>
<li>
<p><strong>RLS (Row Level Security)</strong></p>
</li>
<li>
<p>ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ê¶Œí•œ ì œì–´ âœ…</p>
</li>
<li>ë³´ì•ˆ ëˆ„ë½ <strong>100% ë°©ì§€</strong> âœ…</li>
<li>
<p>Fetpal: <strong>47ê°œ RLS ì •ì±…</strong> í™œì„±í™”</p>
</li>
<li>
<p><strong>ì™œ Supabaseì¸ê°€?</strong></p>
</li>
<li>
<p><strong>PostgreSQL</strong>: ê´€ê³„í˜• DB, ë³µì¡í•œ ì¿¼ë¦¬ ê°€ëŠ¥ âœ…</p>
</li>
<li><strong>ì˜¤í”ˆì†ŒìŠ¤</strong>: Lock-in ì—†ìŒ âœ…</li>
<li><strong>ë¬´ë£Œ í‹°ì–´</strong>: í•™ìƒ í”„ë¡œì íŠ¸ì— ì í•© âœ…</li>
<li>
<p><strong>TypeScript</strong>: íƒ€ì… ìë™ ìƒì„± âœ…</p>
</li>
<li>
<p><strong>ì‹¤ì œ ì„±ê³¼</strong></p>
</li>
<li>
<p>ì½”ë“œëŸ‰: 500ì¤„ â†’ 50ì¤„ (<strong>90% ê°ì†Œ</strong>) âœ…</p>
</li>
<li>ê°œë°œ ì‹œê°„: 2-3ì£¼ â†’ 3-5ì¼ (<strong>80% ë‹¨ì¶•</strong>) âœ…</li>
<li>
<p>API ì‘ë‹µ: í‰ê·  <strong>150ms</strong> âœ…</p>
</li>
<li>
<p><strong>MCP (Model Context Protocol)</strong></p>
</li>
<li>AIê°€ ê°œë°œ ë„êµ¬ì™€ ì§ì ‘ ì†Œí†µ âœ…</li>
<li>TypeScript íƒ€ì… ìë™ ìƒì„± âœ…</li>
<li>ë³´ì•ˆ ì •ì±… ìë™ ê²€ì‚¬ âœ…</li>
</ol>
<hr />
<p><strong>ğŸ“ ë¬¸ì„œ ì •ë³´</strong></p>
<ul>
<li><strong>ì‘ì„±ì¼</strong>: 2025-10-06</li>
<li><strong>ìµœì‹ í™”</strong>: 2025-11-14</li>
<li><strong>ì‘ì„±ì</strong>: LYSS with Claude</li>
<li><strong>ë²„ì „</strong>: v2.0 (4ì°¨ ìŠ¤í”„ë¦°íŠ¸ ìµœì¢…)</li>
<li><strong>ì´ì „ ë¬¸ì„œ</strong>: <a href="./07_ì„±ëŠ¥_í‰ê°€_ê²°ê³¼ì„œ.md">07<em>ì„±ëŠ¥</em>í‰ê°€_ê²°ê³¼ì„œ.md</a></li>
<li><strong>ë‹¤ìŒ ë¬¸ì„œ</strong>: <a href="./09_YOLO_ëª¨ë¸_ì •ì˜ì„œ.md">09<em>YOLO</em>ëª¨ë¸_ì •ì˜ì„œ.md</a></li>
<li><strong>ê´€ë ¨ ë¬¸ì„œ</strong>: <a href="./04_ì‹œìŠ¤í…œ_ì•„í‚¤í…ì²˜.md">04<em>ì‹œìŠ¤í…œ</em>ì•„í‚¤í…ì²˜.md</a></li>
</ul>

    <script>
        // Mermaid ë Œë”ë§ ì™„ë£Œ í›„ í˜ì´ì§€ ë¡œë“œ ì´ë²¤íŠ¸
        window.addEventListener('load', function() {
            console.log('Mermaid diagrams loaded successfully!');
        });
    </script>
</body>
</html>
